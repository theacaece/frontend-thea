<app-header></app-header>

<div align="center">

	<br/><br/>
	
	<div class="row">
	
		<div class="col-md-4 col-md-offset-4">

        <fieldset>

        	<br/>
        	
            <form #userForm="ngForm" (ngSubmit)="save(userForm.value)">
              
              <mat-card-content>
              
              	<mat-card-title>Agregar Usuario</mat-card-title>
              
              	<input type="hidden" name="href" [(ngModel)]="user.href">
              	<input id="edit-formula" type="hidden" name="href" [(ngModel)]="user.userData">
                
                <mat-form-field>
                    <input matInput placeholder="Nombre" [(ngModel)]="user.firstname" 
                          minlength="2" maxlength="32"
                          pattern="[A-Za-z ñÑ]{2,32}"
                          required [formControl]="firstname" />
                    <mat-error *ngIf="firstname.hasError('required')">
                        Debe ingresar nombre
                    </mat-error>
                </mat-form-field><br/>
                
                <mat-form-field>
                  <input matInput placeholder="Apellido" [(ngModel)]="user.lastname" minlength="2" maxlength="32"
                         pattern="[A-Za-z ñÑ]{2,32}"
                         required [formControl]="lastname" />
                  <mat-error *ngIf="firstname.hasError('required')">
                    Debe ingresar apellido
                  </mat-error>
                </mat-form-field><br/>
                
                <mat-form-field>
                    <input type="email" matInput placeholder="Email" [(ngModel)]="user.email"
                          pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
                          [ngClass]="{ 'is-invalid': email.invalid }"
                          required [formControl]="email" />
                    <mat-error *ngIf="firstname.hasError('required')">
                      Debe ingresar e-mail
                    </mat-error>
                  </mat-form-field><br/>

                <mat-form-field>
                  <input matInput placeholder="Usuario" [(ngModel)]="user.username" minlength="3" maxlength="15"
                        pattern="[A-Za-z0-9]{3,15}"
                        required [formControl]="username" />
                  <mat-error *ngIf="firstname.hasError('required')">
                    Debe ingresar usuario
                  </mat-error>
                </mat-form-field><br/>

                <mat-form-field>
                  <input type="password" matInput placeholder="Contrase&ntilde;a" 
                    [(ngModel)]="user.password" minlength="8" maxlength="24"
                    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,24}"
                    required [formControl]="password" />
                  <mat-error *ngIf="firstname.hasError('required')">
                    Debe ingresar contraseña valida
                  </mat-error>
                </mat-form-field><br/>

                <mat-form-field>
                  <input type="password" matInput placeholder="Confirmar Contrase&ntilde;a"
                    pattern="{{password.value}}" required
                    [formControl]="confirmapassword" />
                  <mat-error *ngIf="firstname.hasError('required')">
                    Debe confirmar contraseña
                  </mat-error>
                </mat-form-field><br/>

              	<mat-card-footer><br/>
                  <button id="submit" mat-raised-button color="primary" type="submit" 
                          [disabled]="!userForm.form.valid">Guardar</button>
              		<span style="display:inline-block; width: 0.5em;"></span>
              		<a mat-raised-button color="primary" routerLink="/user-list">Cancelar</a>
                </mat-card-footer>
                
                <mat-error class="alert alert-danger" *ngIf="error">{{error}}</mat-error>
              
            	</mat-card-content>
            
           	 </form>
            
        	</fieldset>

		</div>
    
 	</div>
 
 </div>
 
